{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://hfortix.dev/schema-overrides.json",
  "title": "Schema Overrides",
  "description": "Manual corrections and enhancements to auto-generated FortiOS schemas. These overrides are applied after schema parsing to fix missing or incorrect metadata that cannot be extracted from the Swagger/API documentation.",
  "version": "1.0.0",
  "overrides": {
    "monitor": {
      "system/config-script": {
        "scope": "global",
        "scope_options": ["global"],
        "reason": "Configuration scripts operate at global scope, affecting entire FortiGate system"
      },
      "system/config-script/run": {
        "scope": "global",
        "scope_options": ["global"],
        "reason": "Running config scripts affects global configuration"
      },
      "system/config-script/delete": {
        "scope": "global",
        "scope_options": ["global"],
        "reason": "Deleting config script history is a global operation"
      },
      "system/config-script/upload": {
        "scope": "global",
        "scope_options": ["global"],
        "reason": "Uploading and running config scripts affects global configuration"
      }
    },
    "cmdb": {},
    "service": {},
    "log": {}
  },
  "_documentation": {
    "purpose": "This file defines corrections to schema metadata that cannot be auto-detected from FortiOS API documentation",
    "structure": {
      "overrides": {
        "description": "Organized by API category (monitor, cmdb, service, log)",
        "format": "Each endpoint uses its path as key (e.g., 'system/config-script')",
        "fields": {
          "scope": "Corrects endpoint scope: 'global' | 'vdom' | 'both' | 'unknown'",
          "scope_options": "List of valid scope options: ['global'], ['vdom'], or ['global', 'vdom']",
          "readonly": "Overrides read-only status if incorrectly detected",
          "capabilities": "Full capabilities object (features, methods, etc.) - deep merged",
          "vdom_scope": "Sets whether endpoint supports VDOM parameter: true | false (shorthand for capabilities.features.vdom_scope)",
          "response_fields": "Adds or overrides response field definitions (monitor/service endpoints)",
          "query_params": "Adds or overrides query parameter definitions by HTTP method",
          "reason": "Documents why this override is needed (required for all overrides)"
        }
      }
    },
    "examples": {
      "scope_override": "See system/config-script endpoints above",
      "readonly_override": {
        "system/geography/country": {
          "readonly": true,
          "reason": "Geography reference table is read-only"
        }
      },
      "capabilities_override": {
        "system/ha": {
          "scope": "global",
          "capabilities": {
            "endpoint_type": "singleton",
            "crud": {
              "create": false,
              "read": true,
              "update": true,
              "delete": false
            },
            "features": {
              "vdom_scope": false,
              "filtering": false,
              "pagination": false
            }
          },
          "reason": "HA configuration has incorrect CRUD/feature flags in auto-generated schema"
        }
      },
      "response_fields_example": {
        "system/status": {
          "response_fields": {
            "version": {
              "type": "string",
              "help": "FortiOS version",
              "required": true
            },
            "serial": {
              "type": "string",
              "help": "Device serial number",
              "required": true
            }
          },
          "reason": "Monitor endpoint missing response field definitions in schema"
        }
      },
      "query_params_example": {
        "firewall/policy": {
          "query_params": {
            "GET": {
              "policyid": {
                "type": "integer",
                "required": false,
                "description": "Filter by policy ID"
              }
            }
          },
          "reason": "Additional query parameter not documented in schema"
        }
      },
      "combined_example": {
        "monitor/system/firmware/upgrade": {
          "scope": "global",
          "scope_options": [
            "global"
          ],
          "readonly": false,
          "capabilities": {
            "endpoint_type": "action",
            "crud": {
              "create": true,
              "read": false,
              "update": false,
              "delete": false
            },
            "features": {
              "vdom_scope": false,
              "filtering": false,
              "pagination": false
            }
          },
          "query_params": {
            "POST": {
              "source": {
                "type": "string",
                "required": true,
                "description": "Firmware source URL"
              },
              "flags": {
                "type": "integer",
                "required": false,
                "description": "Upgrade flags"
              }
            }
          },
          "reason": "Firmware upgrade endpoint requires comprehensive metadata corrections"
        }
      }
    },
    "usage": "Loaded by schema_parser.py after parsing. Overrides are applied to EndpointSchema objects before code generation.",
    "contributing": "When adding overrides, always include 'reason' field to document why the override is necessary"
  }
}